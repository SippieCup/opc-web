<% # Clients of this partial must supply the following variables:
   # comment
   # user
%>

<% creator = comment.creator
   name = Commontator.commontator_name(creator) || nil
   link = Commontator.commontator_link(creator, main_app) || nil
   avatar = Commontator.commontator_avatar(creator, self) || nil
%>

<div id="comment_<%= comment.id.to_s %>_div" class="comment">
  <div class="author-box">
    <div class="image">
      <% if avatar.present? %>
        <span class="img" style="background-image:url(<%=avatar%>)"></span>
      <% else %>
        <span class="img"><span class="fa fa-user"></span></span>
      <% end %>
    </div>
    <div class="details">
      <div class="detail-inner">
        <div class="author-name">
          <%=name%>
        </div>
        <div class="meta">
          <span class="date"><%=comment.created_at.strftime("%b %d")%></span>
        </div>
      </div>
    </div>
  </div>
  <div id="comment_<%= comment.id.to_s %>_middle_div" class="comment_div">
    <div id="comment_<%= comment.id.to_s %>_body_div" class="comment_body">
      <%= render partial: 'commontator/comments/body',
                 locals: { comment: comment } %>
    </div>
  </div>
  <div id="comment_<%= comment.id.to_s %>_bottom_div" class="comment_div">
    <span id="comment_<%= comment.id.to_s %>_votes_span" class="comment_votes">
      <%= render partial: 'commontator/comments/votes',
                 locals: { comment: comment,
                              user: user } %>
    </span>
  </div>
</div>
